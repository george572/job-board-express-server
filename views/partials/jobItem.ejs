<article data-job-id="<%= job.id %>">
  <!-- badges -->
  <a 
    href="/vakansia/<%= slugify(job.jobName) %>-<%= job.id %><%= (typeof fromTopCvFit !== 'undefined' && fromTopCvFit) ? '?from=top-cv-fit' : ((typeof fromRecommended !== 'undefined' && fromRecommended) ? '?from=recommended' : '') %>" 
    class="mx-auto my-4 mt-0 rounded-lg cursor-pointer text-sm flex flex-col justify-start items-start gap-2 text-secondary relative bg-white <%= (job.job_premium_status === 'premium' || job.job_premium_status === 'premiumPlus') ? 'pt-2 px-6 pb-6 border-2 border-[#315EFF]' : 'p-6 border border-[#EBEBEB]' %>"
    data-job-id="<%= job.id %>"
    data-job-title="<%- job.jobName.replace(/\"/g, '&quot;') %>"
    data-job-company="<%- job.companyName.replace(/\"/g, '&quot;') %>"
    data-job-location="<%- (job.job_city || '').replace(/\"/g, '&quot;') %>"
    data-job-category="<%- (job.category_id || '').toString().replace(/\"/g, '&quot;') %>"
    data-salary-range="<%- (job.jobSalary || '').replace(/\"/g, '&quot;') %>"
    <% if (job.job_premium_status === 'premium' || job.job_premium_status === 'premiumPlus') { %>data-premium="true"<% } %>
    <% if (job.prioritize === true || job.prioritize === 1 || job.prioritize === 'true') { %>data-prioritize="true"<% } %>
  >
    <% if (job.job_premium_status === 'premiumPlus' || job.job_premium_status === 'premium') { %><div class="w-full flex-shrink-0"><span class="text-[10px] px-1.5 py-0.5 rounded bg-[#315EFF] text-white font-[400]"><%= job.job_premium_status === 'premiumPlus' ? 'პრემიუმ+' : 'პრემიუმი' %></span></div><% } %>
    <div class="flex flex-col sm:flex-row w-full gap-8">
    <header class="w-full md:w-1/3 text-sm flex justify-between">
      <div class="flex gap-2 items-center">
        <% if (job.company_logo) { %>
        <div class="min-w-[44px] max-w-[44px] h-[44px] rounded-lg overflow-hidden">
          <img src="<%= job.company_logo %>" alt="<%= job.companyName %> — ლოგო" referrerpolicy="no-referrer" class="w-full h-full object-contain" />
        </div>
        <% } %>

        <div class="flex flex-col gap-1">
          <h3 class="text-[14px] text-[#3F3F3F] font-[300]"><%= job.companyName %></h3>
          <h2 class="font-kolkha">
            <span class="font-[400] text-[15px] lg:text-[16px] text-[#151515]">
              <%= job.jobName %>
            </span>
          </h2>
        </div>
      </div>
    </header>

    <section class="w-full md:w-1/3 flex justify-center items-center gap-2 md:gap-0">
      <div class="flex gap-1 sm:gap-8 items-center">
        <div class="flex flex-col">
          <span class="font-[mrgvlovani] text-[12px]">ანაზღაურება</span>
          <span class="flex gap-1 items-center text-[12px] font-[500] text-[#151515] mt-1 flex-nowrap text-nowrap">
            <svg width="18" height="12" viewBox="0 0 18 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M11.5001 9.33329H14.8334V5.99996H13.5834V8.08329H11.5001V9.33329ZM9.00008 8.49996C9.69453 8.49996 10.2848 8.2569 10.7709 7.77079C11.257 7.28468 11.5001 6.6944 11.5001 5.99996C11.5001 5.30551 11.257 4.71524 10.7709 4.22913C10.2848 3.74301 9.69453 3.49996 9.00008 3.49996C8.30564 3.49996 7.71536 3.74301 7.22925 4.22913C6.74314 4.71524 6.50008 5.30551 6.50008 5.99996C6.50008 6.6944 6.74314 7.28468 7.22925 7.77079C7.71536 8.2569 8.30564 8.49996 9.00008 8.49996ZM3.16675 5.99996H4.41675V3.91663H6.50008V2.66663H3.16675V5.99996ZM0.666748 11.8333V0.166626H17.3334V11.8333H0.666748ZM2.33341 10.1666H15.6667V1.83329H2.33341V10.1666Z" fill="#315EFF" />
            </svg>
            <%= job.jobSalary ? '₾' + job.jobSalary : 'შეთანხმებით' %>
          </span>
        </div>

        <div class="flex flex-col">
          <span class="font-[mrgvlovani] text-[12px]">ლოკაცია</span>
          <span class="flex gap-1 items-center text-[12px] font-[500] text-[#151515] mt-1">
            <svg width="14" height="18" viewBox="0 0 14 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M6.99992 8.99996C7.45825 8.99996 7.85061 8.83677 8.177 8.51038C8.50339 8.18399 8.66659 7.79163 8.66659 7.33329C8.66659 6.87496 8.50339 6.4826 8.177 6.15621C7.85061 5.82982 7.45825 5.66663 6.99992 5.66663C6.54159 5.66663 6.14922 5.82982 5.82284 6.15621C5.49645 6.4826 5.33325 6.87496 5.33325 7.33329C5.33325 7.79163 5.49645 8.18399 5.82284 8.51038C6.14922 8.83677 6.54159 8.99996 6.99992 8.99996ZM6.99992 15.125C8.69436 13.5694 9.95131 12.1562 10.7708 10.8854C11.5902 9.61454 11.9999 8.48607 11.9999 7.49996C11.9999 5.98607 11.5173 4.74649 10.552 3.78121C9.58672 2.81593 8.4027 2.33329 6.99992 2.33329C5.59714 2.33329 4.41311 2.81593 3.44784 3.78121C2.48256 4.74649 1.99992 5.98607 1.99992 7.49996C1.99992 8.48607 2.40964 9.61454 3.22909 10.8854C4.04853 12.1562 5.30547 13.5694 6.99992 15.125ZM6.99992 17.3333C4.76381 15.4305 3.09367 13.6632 1.9895 12.0312C0.885335 10.3993 0.333252 8.88885 0.333252 7.49996C0.333252 5.41663 1.00339 3.7569 2.34367 2.52079C3.68395 1.28468 5.23603 0.666626 6.99992 0.666626C8.76381 0.666626 10.3159 1.28468 11.6562 2.52079C12.9964 3.7569 13.6666 5.41663 13.6666 7.49996C13.6666 8.88885 13.1145 10.3993 12.0103 12.0312C10.9062 13.6632 9.23603 15.4305 6.99992 17.3333Z" fill="#315EFF" />
            </svg>
            <%= job.job_city %>
          </span>
        </div>

        <div class="flex flex-col">
          <span class="font-[mrgvlovani] text-[12px]">განაკვეთი</span>
          <span class="flex gap-1 items-center text-[12px] font-[500] text-[#151515] mt-1">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.7501 12.9166L12.9167 11.75L9.83341 8.66663V4.83329H8.16675V9.33329L11.7501 12.9166ZM9.00008 17.3333C7.8473 17.3333 6.76397 17.1145 5.75008 16.677C4.73619 16.2395 3.85425 15.6458 3.10425 14.8958C2.35425 14.1458 1.7605 13.2638 1.323 12.25C0.885498 11.2361 0.666748 10.1527 0.666748 8.99996C0.666748 7.84718 0.885498 6.76385 1.323 5.74996C1.7605 4.73607 2.35425 3.85413 3.10425 3.10413C3.85425 2.35413 4.73619 1.76038 5.75008 1.32288C6.76397 0.885376 7.8473 0.666626 9.00008 0.666626C10.1529 0.666626 11.2362 0.885376 12.2501 1.32288C13.264 1.76038 14.1459 2.35413 14.8959 3.10413C15.6459 3.85413 16.2397 4.73607 16.6772 5.74996C17.1147 6.76385 17.3334 7.84718 17.3334 8.99996C17.3334 10.1527 17.1147 11.2361 16.6772 12.25C16.2397 13.2638 15.6459 14.1458 14.8959 14.8958C14.1459 15.6458 13.264 16.2395 12.2501 16.677C11.2362 17.1145 10.1529 17.3333 9.00008 17.3333ZM9.00008 15.6666C10.8473 15.6666 12.4202 15.0173 13.7188 13.7187C15.0174 12.4201 15.6667 10.8472 15.6667 8.99996C15.6667 7.15274 15.0174 5.57982 13.7188 4.28121C12.4202 2.9826 10.8473 2.33329 9.00008 2.33329C7.15286 2.33329 5.57994 2.9826 4.28133 4.28121C2.98272 5.57982 2.33341 7.15274 2.33341 8.99996C2.33341 10.8472 2.98272 12.4201 4.28133 13.7187C5.57994 15.0173 7.15286 15.6666 9.00008 15.6666Z" fill="#315EFF"></path></svg>
            <% if (job.job_type === 'full-time') { %>
            სრული
            <% } else { %>
            ნახევარი
            <% } %>
          </span>
        </div>
      </div>
    </section>

    <footer class="block w-full md:w-1/3 text-[12px] text-start md:text-end flex-shrink-0">
      <time class="font-[500] mb-4">
        <% 
        const startDate = new Date(job.created_at);
        const endDate = new Date(startDate);
        endDate.setMonth(endDate.getMonth() + 1); // add 1 month correctly
  
        const startFormatted = startDate.toLocaleDateString('en-GB', { day: 'numeric', month: 'short', timeZone: 'Asia/Tbilisi' });
        const endFormatted = endDate.toLocaleDateString('en-GB', { day: 'numeric', month: 'short', timeZone: 'Asia/Tbilisi' });
      %>
        <%= startFormatted %> - <%= endFormatted %>
      </time>
    </footer>
    </div>
  </a>

  <div class="flex w-full md:w-auto items-center"></div>
</article>